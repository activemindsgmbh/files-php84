<?php require_once('_template_init.php'); ?>
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Testsuche</title>
    <link rel="stylesheet" type="text/css" href="/default.css">
</head>
<body>
    <?php @include('header.inc.html') ?>

    <h2>Testsuche</h2>

    <form method="post">
        <input type="hidden" name="cmd" value="search">
        <table>
            <tr>
                <td>Suchbegriff:</td>
                <td><input type="text" name="query" value="<?php safe_echo(post_value('query')) ?>" size="40"></td>
            </tr>
        </table>
        <input type="submit" value="Suchen">
    </form>

    <?php if (isset($result) && is_valid_result($result)): ?>
        <h3>Suchergebnisse</h3>
        <table>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Beschreibung</th>
            </tr>
            <?php while ($item = $result->fetch_object()): ?>
                <tr>
                    <td><?php safe_echo($item->id) ?></td>
                    <td><?php safe_echo($item->name) ?></td>
                    <td><?php safe_echo($item->description) ?></td>
                </tr>
            <?php endwhile; ?>
        </table>
    <?php elseif (isset($cmd) && $cmd === 'search'): ?>
        <p>Keine Ergebnisse gefunden.</p>
    <?php endif; ?>
</body>
</html>
